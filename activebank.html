<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Active Bank Accounts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href = "cssfile/activebank.css" rel = "stylesheet">
</head>
<body>
    <div class="container">
        <div class="head">
            <div class="rect">
                <a href="settings.html" style="text-decoration: none; color: var(--main);">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-arrow-left-circle" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
                    </svg>
                </a>
            </div>

            <div class="yeet">
                <h1 style="margin-left: 10px;">Active Banks</h1>
            </div>
        </div>

        <div class="head2 row">
        <h2>Active Bank Accounts</h2>
        <p id="activeAccountsCount">Active Accounts: 0</p>
        <canvas id="accountChart" width="400" height="400"></canvas>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            displayActiveAccountsCount();
            renderChart();
        });

        function displayActiveAccountsCount() {
            const activeAccounts = localStorage.getItem('activeAccounts') || 0;
            document.getElementById('activeAccountsCount').textContent = `Active Accounts: ${activeAccounts}`;
        }

        function renderChart() {
            const bankAccounts = JSON.parse(localStorage.getItem('bankAccounts')) || [];
            const labels = bankAccounts.map(account => account.bankName);
            const data = bankAccounts.map(account => account.amount);

            const ctx = document.getElementById('accountChart').getContext('2d');

            new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total Amount',
                        data: data,
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed !== null) {
                                        label += `$${context.parsed.toFixed(2)}`;
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
